### Configuring mediawiki so that uploaded files are stored on external drive

Had a hell of a time doing this.

Bottom line is there are two variables in `/etc/mediawiki/LocalSettings.php`:

* `$wgUploadDirectory` (path to actual directory on drive, e.g. `/media/root/chaffinch/mediawiki/upload`)
* `$wgUploadPath` (URL path used by Apache in my case to find that file)

For the former, I set it as the example above.

For the `wgUploadPath`, I set this to `{$wgScriptPath}/upload`;

Then, in the "root" of the mediawiki site (`/var/lib/mediawiki` on my Freedombox), I had to create a symlink from "upload" to the `/media/root/chaffinch/mediawiki/upload` directory. Apache won't allow this by default, so I had to allow symlinks in a Directory directive:

```bash
<Directory /var/lib/mediawiki/upload>
	Options FollowSymlinks
	AllowOverride None
</Directory>
```

I think only the `Options` option is relevant here.

Make sure you restart Apache for this setting to take effect.

After this, you can actually access the file via the link generated by mediawiki on the file's wiki page, which is fucking nice.

Also, if you want to disable mediawiki creating subdirectories inside "upload" directory when you upload something, you can set this in `LocalSettings.php`

`$wgHashedUploadDirectory = true;`

Job done?
